const REDIRECT_TIMEOUT=10,offline=document.querySelector(".offline"),hourglass=document.getElementById("hourglass"),seconds=document.getElementById("seconds");seconds.textContent=10;const forwardLink=document.getElementById("forward"),online=navigator.onLine,Timer=function(a,b){let c,d,e=b;this.running=!1,this.counter=0,this.pause=()=>{this.running=!1,window.clearTimeout(c),e-=new Date-d},this.resume=()=>{this.running=!0,d=new Date,window.clearTimeout(c),c=window.setTimeout(a,e)},window.setInterval(()=>{this.running&&(this.counter++,seconds.textContent=REDIRECT_TIMEOUT-this.counter)},1e3),online&&this.resume()},params=new URLSearchParams(document.location.search),url=new URL(params.get("url"));forwardLink.textContent=url.host,forwardLink.href=url;const timer=new Timer(()=>{document.location.href=url},10000);offline.hidden=online,online?(hourglass.classList.add("spin"),forwardLink.classList.remove("noclick")):(hourglass.classList.remove("spin"),forwardLink.classList.add("noclick")),window.addEventListener("offline",()=>{offline.hidden=!1,hourglass.classList.remove("spin"),forwardLink.classList.add("noclick"),timer.pause()}),window.addEventListener("online",()=>{offline.hidden=!0,hourglass.classList.add("spin"),forwardLink.classList.remove("noclick"),timer.resume()});